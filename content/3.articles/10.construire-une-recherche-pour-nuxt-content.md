---
title: Construire une recherche pour Nuxt Content
description:
image: /assets/socials/index.png
cover:
  src:
  alt:
datePublished: 2023-10-17
dateModified: 2023-10-17
layout: article
---

Une barre de recherche est un élément très apprécié des utilisateurs. En effet, elle permet de passer rapidement d'un contenu à un autre sans avoir à naviguer dans les menus. C'est donc un élément très important pour l'expérience utilisateur et s'assurer que les utilisateurs trouvent ce qu'ils cherchent, restant ainsi sur votre site.

Ainsi, dans cet article, nous allons voir comment construire une barre de recherche pour un site Nuxt Content. Avec l'arrivé de [Nuxt Studio](https://nuxt.studio), il n'a jamais été aussi simple de créer, utiliser et alimenter un site website comme un portfolio, un blog ou une documentation. Pour autant, ni Nuxt Content ni les différents templates proposés ne proposent de barre de recherche. Nous allons donc palier à ce manque ensemble.

::alert{type="info"}
[Une PR est ouverte](https://github.com/nuxt/content/pull/2146) pour ajouter cette fonctionnalité directement au coeur de Nuxt Content.
::

## L'Idée Générale

Avant même de s'attaquer à créer une barre de recherche, comprenons la logique de ce que nous allons faire. En effet, il est important de comprendre ce fonctionnement pour pouvoir ensuite l'adapter au besoin du site ou s'il y a besoin d'utiliser un autre outil.

La recherche que nous allons construire est complètement côté-client, c'est à dire qu'il n'y a aucune requête à un serveur ou à une base de données. C'est un système très pratique lorsque le site est statique, que les données sont des fichiers markdown et qu'il n'y a pas de base de données.

<!-- il faut peut être plus détailler cela -->

::alert{type="info"}
Il serait possible d'utiliser des outils comme [Algolia](https://www.algolia.com) pour construire une recherche côté serveur. Cependant, cela demande une configuration et un coût supplémentaire, notamment si vous avez beaucoup de contenu ou de site à gérer.
::

### Les Outils à notre Disposition

Pour réaliser cette recherche, nous avons 2 outils à notre disposition :

- [Minisearch](https://lucaong.github.io/minisearch/), un moteur de recherche plein texte en mémoire, minuscule mais puissant, écrit en JavaScript.
- [Fuse.js](https://www.fusejs.io/), bibliothèque de recherche floue puissante et légère, sans aucune dépendance.

La différence entre les 2 est très minime. Pour notre cas, nous allons utiliser Minisearch parce que je le trouve plus simple à utiliser, à configurer et à personnaliser.

## Concrètement avec Nuxt et Content

Pour pouvoir réaliser une recherche, même côté-client, il est important d'avoir à disposition des données. Dans notre cas, il s'agit de l'ensemble du contenu de Nuxt Content.

Ensuite, il faut fournir ces données à Minisearch pour qu'il puisse effectuer la recherche à partir du mot clé saisi par l'utilisateur. Pour cela, et parce que nous générons notre site, nous allons créer un fichier JSON content l'ensemble des données de Nuxt Content. Par la suite, nous allons pouvoir récupérer ce fichier JSON et l'utiliser pour construire notre recherche.

Pour créer notre fichier JSON, nous allons utiliser la partie serveur de Nuxt. En créant un nouveau point d'accès à notre site, nous allons pouvoir récupérer l'ensemble des données de Nuxt Content et les transformer en JSON. Grâce au pré-rendu, nous allons pouvoir générer ce fichier JSON à la construction du site, nous permettant de ne pas avoir à le générer à chaque fois que l'utilisateur effectue une recherche, évitant ainsi l'utilisation d'un serveur.

::alert{type="info"}
Pour en savoir plus sur [la partie serveur de Nuxt](https://nuxt.com/docs/getting-started/server).
::




<!--
expliquer pourquoi on veut une locale search (et présenter algolia mais complexe à configurer)

faire une démo sur alpine parce que c'est le plus marrant.
- fonctionnement général
- server side

créer un endpoint qui va retourner le json

- client side

ne pas ajouter une modale mais faire une nouvelle page

fetch le json (bien faire une partie sur le serveur ou non) et montrer l'incidence sur le payload.json (faire un autre article sur l'ajout d'une modale et les paramètres à faire attention) (montrer plusieurs types de search pour montrer à quel point on peut personnaliser la chose

- finally, it's nice
-->
